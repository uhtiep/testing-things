<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Space Shooter</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }
    canvas {
      display: block;
      background-color: #000;
      margin: 0 auto;
    }
    #score {
      position: fixed;
      top: 20px;
      left: 20px;
      font-size: 20px;
      color: white;
    }
  </style>
</head>
<body>

  <canvas id="gameCanvas"></canvas>
  <div id="score">Score: 0</div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const WIDTH = window.innerWidth;
    const HEIGHT = window.innerHeight;
    canvas.width = WIDTH;
    canvas.height = HEIGHT;

    // Player setup
    const player = {
      x: WIDTH / 2,
      y: HEIGHT - 50,
      width: 40,
      height: 40,
      speed: 5,
      color: "cyan",
      health: 3,
      shootingCooldown: 0
    };

    // Bullet setup
    const bullets = [];
    const enemies = [];
    let score = 0;
    let gameOver = false;

    // Power-ups setup
    const powerUps = [];

    // Key state tracking
    const keys = { left: false, right: false, up: false, down: false, shoot: false };

    // Event listeners for player movement
    document.addEventListener("keydown", (e) => {
      if (e.code === "ArrowLeft" || e.code === "KeyA") keys.left = true;
      if (e.code === "ArrowRight" || e.code === "KeyD") keys.right = true;
      if (e.code === "ArrowUp" || e.code === "KeyW") keys.up = true;
      if (e.code === "ArrowDown" || e.code === "KeyS") keys.down = true;
      if (e.code === "Space") keys.shoot = true;
    });

    document.addEventListener("keyup", (e) => {
      if (e.code === "ArrowLeft" || e.code === "KeyA") keys.left = false;
      if (e.code === "ArrowRight" || e.code === "KeyD") keys.right = false;
      if (e.code === "ArrowUp" || e.code === "KeyW") keys.up = false;
      if (e.code === "ArrowDown" || e.code === "KeyS") keys.down = false;
      if (e.code === "Space") keys.shoot = false;
    });

    // Function to move player
    function movePlayer() {
      if (keys.left && player.x > 0) player.x -= player.speed;
      if (keys.right && player.x < WIDTH - player.width) player.x += player.speed;
      if (keys.up && player.y > 0) player.y -= player.speed;
      if (keys.down && player.y < HEIGHT - player.height) player.y += player.speed;
    }

    // Function to handle shooting
    function shootBullet() {
      if (keys.shoot && player.shootingCooldown === 0) {
        bullets.push({
          x: player.x + player.width / 2 - 5,
          y: player.y,
          width: 10,
          height: 20,
          speed: 8,
          color: "white"
        });
        player.shootingCooldown = 20;  // Cooldown for shooting
      }
    }

    // Function to update bullets
    function updateBullets() {
      for (let i = 0; i < bullets.length; i++) {
        bullets[i].y -= bullets[i].speed;
        if (bullets[i].y < 0) bullets.splice(i, 1);
      }
    }

    // Function to spawn enemies
    function spawnEnemies() {
      if (Math.random() < 0.02) {
        enemies.push({
          x: Math.random() * WIDTH,
          y: -30,
          width: 40,
          height: 40,
          speed: 3,
          color: "red"
        });
      }
    }

    // Function to update enemies
    function updateEnemies() {
      for (let i = 0; i < enemies.length; i++) {
        enemies[i].y += enemies[i].speed;
        if (enemies[i].y > HEIGHT) {
          enemies.splice(i, 1);
        }
        // Check for collisions with player
        if (isCollision(player, enemies[i])) {
          player.health--;
          enemies.splice(i, 1);
          if (player.health <= 0) gameOver = true;
        }
      }
    }

    // Function to check collisions
    function isCollision(a, b) {
      return a.x < b.x + b.width &&
             a.x + a.width > b.x &&
             a.y < b.y + b.height &&
             a.y + a.height > b.y;
    }

    // Function to update the score and handle power-ups
    function updateScore() {
      for (let i = 0; i < bullets.length; i++) {
        for (let j = 0; j < enemies.length; j++) {
          if (isCollision(bullets[i], enemies[j])) {
            score++;
            enemies.splice(j, 1);
            bullets.splice(i, 1);
            break;
          }
        }
      }
    }

    // Function to draw everything
    function draw() {
      ctx.clearRect(0, 0, WIDTH, HEIGHT);

      // Draw player
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.width, player.height);

      // Draw bullets
      for (const bullet of bullets) {
        ctx.fillStyle = bullet.color;
        ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
      }

      // Draw enemies
      for (const enemy of enemies) {
        ctx.fillStyle = enemy.color;
        ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
      }

      // Display score and health
      ctx.fillStyle = "white";
      ctx.font = "20px Arial";
      ctx.fillText("Score: " + score, 20, 30);
      ctx.fillText("Health: " + player.health, 20, 60);

      if (gameOver) {
        ctx.fillText("Game Over!", WIDTH / 2 - 70, HEIGHT / 2);
        return;
      }
    }

    // Function to update the game logic
    function update() {
      if (gameOver) return;

      movePlayer();
      shootBullet();
      updateBullets();
      spawnEnemies();
      updateEnemies();
      updateScore();

      // Shooting cooldown
      if (player.shootingCooldown > 0) player.shootingCooldown--;

      draw();
      requestAnimationFrame(update);
    }

    update(); // Start the game
  </script>

</body>
</html>
